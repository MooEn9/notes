## 从Paxos到Zookeeper 第一章 分布式架构

* __脑裂__：分布式网络中只有部分节点能够完成通信(网络分区)。
* __三态__：成功、失败、超时（由于网络原因）
* __ACID__
  * 原子性（Atomicity）
  * 一致性（Consistency）
  * 隔离性（Isolation）
  * 持久性（Durability）
* __CPA定理__
  * 分布式系统无法同时满足cpa即：C（Consistency，一致性）、A：（Availability：可用性）、分区容错（Partition tolerance）。三个只能同时满足其中的两项。
  * 一致性--特指强一致性。
  * 可用性：系统必须处于可用的状态，对于用户的每一个操作请求总是能在有限时间内（通常是系统设计之初的指标）返回结果（这里的结果是指让用户清楚的结果，例如成功或失败，如过一个结果是oom或者shc）那么这个结果一样不可用
  * 分区容错性：在遇到任何网络分区故障的情况下真个分布式系统都能提供满足一致性和可用性的服务，除非整个网络都发生了故障。
  * ![1546418549589](C:\Users\mooen\AppData\Local\Temp\1546418549589.png)
* __BASE理论__（实践经验）
  * 本质上是在cap定理上选择了放弃c（这里的放弃c不是指没有一致性，只是放弃了强一致性，改为最终一致性）
  * Basically Available（基本可用），Soft state（软状态），Eventually Consistent（最终一致性）.
  * 基本可用例子（发生不可预知故障时）：
    1. 损失响应时间--用户花费时间增加
    2. 功能上的损失--抢购
  * 弱状态：系统中的数据允许存在中间状态，这个中间状态并不会影响系统的整体可用性（数据同步允许时间延迟）。
  * 最终一致性（5分类）：
    * 因果一致性：在进程A通知了进程B的情况下，B对数据的访问都应该基于A更新之后的值，对于无关的进程C则没有这种限制。
    * 读己之所写：对于进程A来说，总是能够读到自己更新后的的值
    * 会话一致性：将对系统数据的访问限定在一个会话中，在会话中实现”读己之所写“,意味着客户能在一个会话中读到最新值
    * 单调一致性：如果一个进程从系统中读取出一个数据项的值之后，之后对于任何数据库的访问都不应该基于更旧的值。